# REChain –¥–ª—è –†–ï–î –û–° (RED OS)

## üî¥ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –†–ï–î –û–°

–†–ï–î –û–° (RED OS) - —ç—Ç–æ —Ä–æ—Å—Å–∏–π—Å–∫–∞—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ Red Hat Enterprise Linux. REChain –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –†–ï–î –û–° –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –†–ï–î –û–°

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏
- **–†–ï–î –û–° 7.3** –∏ –≤—ã—à–µ
- **–†–ï–î –û–° 8.x** (–≤—Å–µ –≤–µ—Ä—Å–∏–∏)
- **–†–ï–î –û–° 9.x** (–≤—Å–µ –≤–µ—Ä—Å–∏–∏)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- x86_64 (Intel/AMD 64-bit)
- aarch64 (ARM 64-bit) - —á–µ—Ä–µ–∑ AppImage

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –†–ï–î –û–°

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ DNF (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –°–∫–∞—á–∞–π—Ç–µ RPM –ø–∞–∫–µ—Ç
wget https://github.com/sorydima/REChain-/releases/latest/download/rechainonline-4.1.8-1.x86_64.rpm

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo dnf install rechainonline-4.1.8-1.x86_64.rpm

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
sudo dnf localinstall rechainonline-4.1.8-1.x86_64.rpm
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ YUM (–¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π)
```bash
# –î–ª—è –†–ï–î –û–° 7.x
sudo yum install rechainonline-4.1.8-1.x86_64.rpm

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ rpm –Ω–∞–ø—Ä—è–º—É—é
sudo rpm -ivh rechainonline-4.1.8-1.x86_64.rpm
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ RPM
```bash
# –ü—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo rpm -i rechainonline-4.1.8-1.x86_64.rpm

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏
sudo rpm -U rechainonline-4.1.8-1.x86_64.rpm

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)
sudo rpm -i --force rechainonline-4.1.8-1.x86_64.rpm
```

## üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
sudo mkdir -p /var/www/html/repo/rechainonline
sudo cp rechainonline-4.1.8-1.x86_64.rpm /var/www/html/repo/rechainonline/
sudo createrepo /var/www/html/repo/rechainonline/

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
sudo tee /etc/yum.repos.d/rechainonline.repo << EOF
[rechainonline]
name=REChain Corporate Repository
baseurl=http://repo.company.ru/rechainonline/
enabled=1
gpgcheck=0
EOF
```

### –ú–∞—Å—Å–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Ansible
```yaml
# rechainonline-deploy.yml
---
- name: Deploy REChain on RED OS
  hosts: redos_servers
  become: yes
  vars:
    rechainonline_version: "4.1.8-1"
    
  tasks:
    - name: Add REChain repository
      yum_repository:
        name: rechainonline
        description: REChain Corporate Repository
        baseurl: http://repo.company.ru/rechainonline/
        enabled: yes
        gpgcheck: no
        
    - name: Install REChain
      dnf:
        name: rechainonline
        state: present
        
    - name: Configure corporate settings
      template:
        src: rechainonline-config.j2
        dest: /etc/rechainonline/config.json
        mode: '0644'
        
    - name: Enable REChain service
      systemd:
        name: rechainonline
        enabled: yes
        state: started
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –†–ï–î –û–°

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Active Directory
```bash
# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –¥–æ–º–µ–Ω—É
sudo realm join --user=administrator company.local

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSO –¥–ª—è REChain
sudo tee /etc/rechainonline/sso.conf << EOF
[sso]
enabled=true
domain=company.local
server=https://sso.company.local
client_id=rechainonline
EOF
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å FreeIPA
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ FreeIPA
sudo dnf install freeipa-client

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –¥–æ–º–µ–Ω—É FreeIPA
sudo ipa-client-install --domain=company.local --server=ipa.company.local

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è REChain –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FreeIPA
sudo tee -a /etc/rechainonline/ldap.conf << EOF
[ldap]
server=ldap://ipa.company.local
base_dn=dc=company,dc=local
bind_dn=uid=rechainonline,cn=sysaccounts,cn=etc,dc=company,dc=local
EOF
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SELinux
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ SELinux
sestatus

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ SELinux –¥–ª—è REChain
sudo setsebool -P httpd_can_network_connect 1
sudo semanage fcontext -a -t bin_t "/usr/bin/rechainonline"
sudo restorecon -v /usr/bin/rechainonline

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏
sudo tee rechainonline.te << EOF
module rechainonline 1.0;

require {
    type unconfined_t;
    type http_port_t;
    class tcp_socket name_connect;
}

allow unconfined_t http_port_t:tcp_socket name_connect;
EOF

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏
checkmodule -M -m -o rechainonline.mod rechainonline.te
semodule_package -o rechainonline.pp -m rechainonline.mod
sudo semodule -i rechainonline.pp
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewalld
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --permanent --add-port=8448/tcp
sudo firewall-cmd --reload

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
sudo tee /etc/firewalld/services/rechainonline.xml << EOF
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>REChain</short>
  <description>REChain Matrix Client</description>
  <port protocol="tcp" port="443"/>
  <port protocol="tcp" port="8448"/>
</service>
EOF

sudo firewall-cmd --permanent --add-service=rechainonline
sudo firewall-cmd --reload
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è
sudo mkdir -p /etc/systemd/system/rechainonline.service.d/
sudo tee /etc/systemd/system/rechainonline.service.d/logging.conf << EOF
[Service]
StandardOutput=journal
StandardError=journal
SyslogIdentifier=rechainonline
EOF

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u rechainonline -f
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å rsyslog
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ rsyslog –¥–ª—è REChain
sudo tee /etc/rsyslog.d/rechainonline.conf << EOF
# REChain logging
:programname, isequal, "rechainonline" /var/log/rechainonline.log
& stop
EOF

sudo systemctl restart rsyslog
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Zabbix
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix –∞–≥–µ–Ω—Ç–∞
sudo dnf install zabbix-agent2

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ REChain
sudo tee /etc/zabbix/zabbix_agent2.d/rechainonline.conf << EOF
# REChain monitoring
UserParameter=rechainonline.status,systemctl is-active rechainonline
UserParameter=rechainonline.memory,ps -o rss= -p $(pgrep rechainonline) | awk '{sum+=$1} END {print sum*1024}'
UserParameter=rechainonline.connections,netstat -an | grep :8448 | wc -l
EOF

sudo systemctl restart zabbix-agent2
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
sudo dnf install dnf-automatic

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è REChain
sudo tee -a /etc/dnf/automatic.conf << EOF
[commands]
upgrade_type = security
download_updates = yes
apply_updates = yes

[emitters]
emit_via = email
email_from = admin@company.ru
email_to = it@company.ru
EOF

sudo systemctl enable --now dnf-automatic.timer
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
#!/bin/bash
# backup-rechainonline.sh

BACKUP_DIR="/backup/rechainonline/$(date +%Y%m%d)"
mkdir -p "$BACKUP_DIR"

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp -r /etc/rechainonline/ "$BACKUP_DIR/"
cp -r /usr/share/rechainonline/ "$BACKUP_DIR/"

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
for user in $(ls /home/); do
    if [ -d "/home/$user/.config/REChain" ]; then
        mkdir -p "$BACKUP_DIR/users/$user"
        cp -r "/home/$user/.config/REChain" "$BACKUP_DIR/users/$user/"
    fi
done

# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
tar -czf "$BACKUP_DIR.tar.gz" -C "$BACKUP_DIR" .
rm -rf "$BACKUP_DIR"

echo "Backup completed: $BACKUP_DIR.tar.gz"
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
rpm -qR rechainonline

# –ü–æ–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
ldd /usr/share/rechainonline/rechainonline

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo dnf install gtk3-devel glib2-devel libsecret-devel
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SELinux
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π SELinux
sudo ausearch -m avc -ts recent | grep rechainonline

# –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ SELinux –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
sudo setenforce 0

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∞—é—â–µ–π –ø–æ–ª–∏—Ç–∏–∫–∏
sudo audit2allow -a -M rechainonline_local
sudo semodule -i rechainonline_local.pp
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
ss -tulpn | grep rechainonline

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Matrix —Å–µ—Ä–≤–µ—Ä—É
curl -v https://matrix.org/_matrix/client/versions

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
dig matrix.org
nslookup matrix.org
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –†–ï–î –û–°

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –†–ï–î –û–°
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã SSL
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ–º–µ–Ω–æ–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω RPM –ø–∞–∫–µ—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ SELinux
- [ ] –°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AD/FreeIPA

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Zabbix
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –†–ï–î –û–°

**–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- Email: redos-support@rechain.network
- –ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è: +7 (495) 987-65-43
- Telegram: @REChainRedOSSupport

**–†–µ—Å—É—Ä—Å—ã:**
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –†–ï–î –û–°
- –§–æ—Ä—É–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –†–ï–î –û–° –≤–µ—Ä—Å–∏–∏ 4.1.8+1150*
*–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è*
