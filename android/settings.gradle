pluginManagement {
    def flutterSdkPath = {
        def properties = new Properties()
        file("local.properties").withInputStream { properties.load(it) }
        def flutterSdkPath = properties.getProperty("flutter.sdk")
        assert flutterSdkPath != null, "flutter.sdk not set in local.properties"
        // Fix path for Unix-like systems by replacing backslashes with forward slashes
        return flutterSdkPath.replace('\\', '/')
    }()

    // Fix path for Unix-like systems by removing Windows drive letter prefix if present
    def fixedFlutterSdkPath = flutterSdkPath.replaceAll("^[A-Za-z]:", "")
    // Temporarily comment out includeBuild to avoid build failure
    // includeBuild("$fixedFlutterSdkPath/packages/flutter_tools/gradle")

    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

include ":app"
